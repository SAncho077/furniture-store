{% extends 'products/base.html' %}
{% load static %}
{% load humanize %}
  {% block content %}

         <div class="header-orderCreate">
        <h1>Оформление заказа</h1>
        <p>Пожалуйста, заполните все необходимые данные для доставки</p>
    </div>

    <div class="container-orderCreate">
        <form class="checkout-form-orderCreate" action="{% url 'order-create' %}" method="POST">
            {% csrf_token %}
            <div class="section-title-orderCreate">Адрес доставки</div>

            <div class="form-group-orderCreate">
                <div class="form-row-orderCreate">
                    <div>
                        <label for="{{ form.first_name.id_for_label }}" class="required-orderCreate label-orderCreate">Имя</label>
                        <div class="input-container-orderCreate">
                            {{ form.first_name }}
                        </div>
                        <div class="input-hint-orderCreate">Ваше имя, как в паспорте</div>
                    </div>

                    <div>
                        <label for="{{ form.last_name.id_for_label }}" class="required-orderCreate label-orderCreate">Фамилия</label>
                        <div class="input-container-orderCreate">
                           {{ form.last_name }}
                        </div>
                        <div class="input-hint-orderCreate">Ваша фамилия</div>
                    </div>
                </div>
            </div>

            <div class="form-group-orderCreate">
                <label for="{{ form.email.id_for_label }}" class="required-orderCreate label-orderCreate">Адрес электронной почты</label>
                <div class="input-container-orderCreate">
                   {{ form.email }}
                </div>
                <div class="input-hint-orderCreate">На этот адрес придет подтверждение заказа</div>
            </div>

            <div class="form-group-orderCreate">
                <label for="{{ form.address.id_for_label }}" class="required-orderCreate label-orderCreate">Адрес доставки</label>
                <div class="input-container-orderCreate">
                    {{ form.address }}
                </div>
                <div class="input-hint-orderCreate">Укажите полный адрес для доставки курьером</div>
            </div>

            <div class="info-box-orderCreate">
                <div class="info-title-orderCreate">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#4f46e5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 16V12" stroke="#4f46e5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 8H12.01" stroke="#4f46e5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Важная информация
                </div>
                <div class="info-text-orderCreate">
                    Все поля, отмеченные символом <span style="color: #ef4444; font-weight: bold;">*</span>, являются обязательными для заполнения.
                    Проверьте правильность введенных данных перед подтверждением заказа.
                </div>
            </div>

            <button type="submit" class="continue-btn-orderCreate">
                <svg class="btn-icon-orderCreate" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 5L19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Продолжить оформление
            </button>
        </form>

        <div class="order-summary-orderCreate">
            <div class="order-title-orderCreate">Ваш заказ</div>
            {% for basket in baskets %}
            <div class="cart-item-orderCreate">
                <div class="item-details-orderCreate">
                    <div class="item-name-orderCreate">{{ basket.product.name }}</div>
                    <div class="item-meta-orderCreate">
                        <span>Количество: {{ basket.quantity }} шт.</span>
                    </div>
                </div>
                <div class="item-price-orderCreate">{{ basket.sum|intcomma }} ₽</div>
            </div>
            {% endfor %}
            <div class="divider-orderCreate"></div>

            <div class="total-orderCreate">
                <div class="total-line-orderCreate">
                    <span>Товары ({{ baskets.total_quantity }})</span>
                    <span>{{ baskets.total_sum|intcomma }} ₽</span>
                </div>
                <div class="total-line-orderCreate">
                    <span>Доставка</span>
                    <span class="free-shipping-orderCreate">Бесплатно</span>
                </div>
                <div class="total-line-orderCreate">
                    <span>Налог</span>
                    <span>0 ₽</span>
                </div>
                <div class="total-line-orderCreate total-final-orderCreate">
                    <span>СУММА К ОПЛАТЕ</span>
                    <span>{{ baskets.total_sum|intcomma }} ₽</span>
                </div>
            </div>

            <div class="secure-badge-orderCreate">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 15V17" stroke="#0369a1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 11C12.5523 11 13 11.4477 13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11Z" fill="#0369a1"/>
                    <path d="M18 11C18 7.13401 14.866 4 11 4C7.13401 4 4 7.13401 4 11C4 14.866 7.13401 18 11 18C12.1512 18 13.2723 17.7591 14.3123 17.2929L17.5 20.5L20.5 17.5L17.5 14.5C17.7591 13.2723 18 12.1512 18 11Z" stroke="#0369a1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Безопасная оплата · SSL-шифрование
            </div>

            <div class="info-box-orderCreate">
                <div class="info-title-orderCreate">Гарантия доставки</div>
                <div class="info-text-orderCreate">
                    Доставка осуществляется в течение 2-5 рабочих дней. Вы получите SMS и email с трек-номером для отслеживания.
                </div>
            </div>
        </div>
    </div>

{% endblock %}